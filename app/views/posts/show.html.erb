<%= stylesheet_link_tag "buttons", "forms" %>

<div class="post-container">
  <h1 class="post-title"><%= @post.title %></h1>
  <p class="post-meta"><%= "Created at " + @post.created_at.strftime('%d %B, %Y') %></p>
  <div class="post-meta">
   <%= link_to "Created by " + @post.user.email, user_path(@post.user) %>
  </div>

  <div class="post-content">
    <%= @post.body %>
  </div>

  <div class="comments-section">
    <h2><%= "Comments" %></h2>
    <ul class="comments-list">
      <% @post.comments.each do |comment| %>
        <li class="comment">
          <div class="comment-body"><%= comment.body %></div>
        </li>
      <% end %>
    </ul>
  </div>

  <h2><%= "Add a comment" %></h2>
  <%= form_with(model: [@post, Comment.new], local: true, html: { class: "comment-form" } ) do |form| %>
    <div class="field">
      <%= form.text_area :body, placeholder: "Write your comment here", class: "form-text-input__inner" %>
    </div>
    <%= form.hidden_field :post_id, value: @post.id %>
    <div class="field">
      <%= form.collection_select :community_id, Community.all, :id, :name %>
    </div>
    <div class="field">
      <%= form.collection_select :user_id, User.all, :id, :id %>
    </div>
    <div class="actions">
      <%= form.submit "Comenta", class: "generic-button" %>
    </div>
  <% end %>
</div>
</div>
